# MVC

- μ”μ²­κ²½λ΅ λ§¤ν•‘
- Model (λ·°μ—μ„ μ‚¬μ©ν•  λ°μ΄ν„°)
- μ‘λ‹µμ²λ¦¬
- μ”μ²­μ²λ¦¬

## μ”μ²­κ²½λ΅ λ§¤ν•‘

- @Controller
- @RequestMapping(value="/κ²½λ΅", method=RequestMethod.λ©”μ†λ“)
  - @GetMapping("/κ²½λ΅")
  - @PostMapping("/κ²½λ΅")
  - @PutMapping("/κ²½λ΅")
  - @DeleteMapping("/κ²½λ΅")

  - μ£Όμ” μ†μ„±
  - value : μ”μ²­κ²½λ΅
  - method : HTTP λ©”μ†λ“(GET, POST, PUT, DELETE)
  - params : μ”μ²­ νλΌλ―Έν„° μ΅°κ±΄
  - headers : μ”μ²­ ν—¤λ” μ΅°κ±΄
  - consumes : μ”μ²­ μ½ν…μΈ  νƒ€μ… μ΅°κ±΄ (Content-Type)
  - produces : μ‘λ‹µ μ½ν…μΈ  νƒ€μ… μ΅°κ±΄ (Accept)
- @PathVariable("λ³€μλ…") : κ²½λ΅ λ³€μ λ§¤ν•‘
  - μμ‹: /user/{id} -> @PathVariable("id") String id
- @RequestParam("νλΌλ―Έν„°λ…") : μ”μ²­ νλΌλ―Έν„° λ§¤ν•‘
  - μμ‹: /search?query=java -> @RequestParam("query") String query

## Model

: λ·°μ—μ„ μ‚¬μ©ν•  λ°μ΄ν„°λ¥Ό λ‹΄λ” κ°μ²΄
β­ λ¨λΈμ— λ°μ΄ν„° λ“±λ΅ν•κΈ°

1. μ»¨νΈλ΅¤λ¬ λ©”μ†λ“μ— Model λ§¤κ°λ³€μ μ¶”κ°€

- μ»¨νΈλ΅¤λ¬λ©”μ†λ“(Model model)

1. model.addAttribute("μ†μ„±λ…", κ°’) λ©”μ†λ“ νΈμ¶
2. λ·°μ—μ„ λ¨λΈ λ°μ΄ν„° μ‚¬μ©ν•κΈ°

- Thymeleaf
  - ${} : λ³€μ ν‘ν„μ‹
    <th:block th:text="${μ†μ„±λ…}"></th:block>
    <h1 th:text="${μ†μ„±λ…}"></h1>
    <input type="text" th:value="${μ†μ„±λ…}"/>
    <input type="text" th:value="${κ°μ²΄.λ³€μλ…}"/>

  - @{} : URL λ§ν¬ ν‘ν„μ‹
    <img th:src="@{${μ†μ„±λ…}}"/>

  - νΉλ³„ν• μλ―Έμ μ†μ„±
  - th:text : ν…μ¤νΈ μ¶λ ¥
  - th:object : νΌ κ°μ²΄ λ°”μΈλ”©
  - th:field : νΌ ν•„λ“ λ°”μΈλ”©
    - object, field μμ‹
      class User {
        private String username;
        private String name;
        private String email;
      }
      β­ *{λ³€μλ…} = ${user.λ³€μλ…}
      <form th:object="${user}">
        <input type="text" th:field="*{username}"/>
        <input type="text" th:field="*{name}"/>
        <input type="text" th:field="*{email}"/>
      </form>
      β­ id, name μ†μ„± μλ™ μƒμ„±
      <form th:object="${user}">
        <input type="text" id="username" name="username"/>
        <input type="text" id="name" name="name"/>
        <input type="text" id="email" name="email"/>
      </form>
  - th:if, th:unless : μ΅°κ±΄λ¶€ λ λ”λ§
    <th:block th:if="${μ΅°κ±΄μ‹}">μ΅°κ±΄μ΄ μ°ΈμΌ λ• μ¶λ ¥</th:block>
    <th:block th:unless="${μ΅°κ±΄μ‹}">μ΅°κ±΄μ΄ κ±°μ§“μΌ λ• μ¶λ ¥</th:block>
  - th:each : λ°λ³µλ¬Έ
    <th:block th:each="item, iterStat : ${λ¦¬μ¤νΈ}">
      <th:block th:text="${iterStat.index} + ' : ' + ${item}"></th:block>
    </th:block>
    - iterStat μ μ†μ„±
      - index : 0λ¶€ν„° μ‹μ‘ν•λ” μΈλ±μ¤
      - count : 1λ¶€ν„° μ‹μ‘ν•λ” μΉ΄μ΄νΈ
      - size : μ „μ²΄ μ•„μ΄ν… μ
      - even : μ§μ μ—¬λ¶€ (boolean)
      - odd : ν™€μ μ—¬λ¶€ (boolean)
      - first : μ²« λ²μ§Έ μ•„μ΄ν… μ—¬λ¶€ (boolean)
      - last : λ§μ§€λ§‰ μ•„μ΄ν… μ—¬λ¶€ (boolean)

## μ‘λ‹µμ²λ¦¬

- void                : μ”μ²­ κ²½λ΅μ™€ λ™μΌν• λ·° μ΄λ¦„ μ‚¬μ©
- String              : λ·° μ΄λ¦„ λ°ν™
- ModelAndView        : λ¨λΈκ³Ό λ·° μ΄λ¦„ ν•¨κ» λ°ν™
- ν΄λμ¤               : κ°μ²΄λ¥Ό JSON ν•μ‹μΌλ΅ λ³€ν™ν•μ—¬ μ‘λ‹µ
- μ»¬λ ‰μ…               : λ¦¬μ¤νΈλ¥Ό JSON ν•μ‹μΌλ΅ λ³€ν™ν•μ—¬ μ‘λ‹µ
- ResponseEntity<T>   : HTTP μ‘λ‹µ μƒνƒ, ν—¤λ”, λ³Έλ¬Έ μ§€μ •
                      (@ResponseBody μ—†μ–΄λ„ μ‘λ‹µλ³Έλ¬Έ μ§μ ‘ μ§€μ •)

- @ResponseBody
  - λ°ν™κ°’μ„ μ‘λ‹µ λ³Έλ¬Έμ— μ§μ ‘ μ§€μ • (JSON λ“±μΌλ΅ λ³€ν™)
  - ν΄λμ¤ λλ” μ»¬λ ‰μ… λ°ν™ μ‹ μ‚¬μ©

## μ”μ²­μ²λ¦¬

- κΈ°λ³Ένƒ€μ…+Wrapper  : @RequestParam("νλΌλ―Έν„°λ…") λ§¤κ°λ³€μλ…
- κ°μ²΄ + μ»¬λ ‰μ…
  - λ°”μΈλ”©
  - νΌ(form) λ°μ΄ν„°  : μλ™ λ°”μΈλ”©
  - JSON λ°μ΄ν„°      : @RequestBody λ§¤κ°λ³€μλ…

  - μ„ μ–Έ
  - κΈ°λ³Έ μƒμ„±μλ΅ κ°μ²΄ μƒμ„±
  - setter λ©”μ†λ“λ΅ κ°’ μ„¤μ •
- HttpServletRequest      : μ”μ²­ μ •λ³΄ μ§μ ‘ μ ‘κ·Ό
- HttpServletResponse     : μ‘λ‹µ μ •λ³΄ μ§μ ‘ μ ‘κ·Ό
- HttpSession             : μ„Έμ… μ •λ³΄ μ ‘κ·Ό
- @RequestHeader          : μ”μ²­ ν—¤λ” κ°’ λ§¤ν•‘
- @CookieValue            : μΏ ν‚¤ κ°’ λ§¤ν•‘

  β­νΌ μ”μ²­ μ²λ¦¬

- μΌλ° νλΌλ―Έν„° : @RequestParam("νλΌλ―Έν„°λ…") λ§¤κ°λ³€μλ…
- λ©€ν‹° νλΌλ―Έν„° : @RequestParam("νλΌλ―Έν„°λ…") List<νƒ€μ…> λ§¤κ°λ³€μλ…
                   @RequestParam("νλΌλ―Έν„°λ…") νƒ€μ…[] λ§¤κ°λ³€μλ…
- νμΌ μ—…λ΅λ“ :
      @RequestParam("νλΌλ―Έν„°λ…") MultipartFile λ§¤κ°λ³€μλ…
      @RequestParam("νλΌλ―Έν„°λ…") List<MultipartFile> λ§¤κ°λ³€μλ…

- νμΌ μ—…λ΅λ“ μ„¤μ •  :
      π“application.properties
      β΅νμΌ μ—…λ΅λ“ κ²½λ΅ μ„¤μ •
      upload.path=μ—…λ΅λ“κ²½λ΅
      spring.servlet.multipart.location=μ—…λ΅λ“κ²½λ΅
      β΅νμΌ μ©λ‰ μ„¤μ • (file κΈ°λ³Έ 1MB, request κΈ°λ³Έ 10MB)
      spring.servlet.multipart.max-file-size=10MB
      spring.servlet.multipart.max-request-size=50MB

      π“μ»¨νΈλ΅¤λ¬
      @Value("${upload.path}") String uploadPath
      @Value("${spring.servlet.multipart.location}") String multipartLocation

- λ‚ μ§ νƒ€μ… : @DateTimeFormat(pattern="yyyy-MM-dd") λ§¤κ°λ³€μλ…
